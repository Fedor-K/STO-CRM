# План работ — STO-CRM

## Фаза 1 — Фундамент

### 1.1 Инициализация проекта
- [ ] Создать Turborepo монорепо (root package.json, turbo.json, pnpm-workspace.yaml)
- [ ] Создать NestJS приложение (`apps/api`)
- [ ] Создать Next.js приложение (`apps/web`)
- [ ] Создать пакет `packages/shared` (типы, Zod-схемы, константы, i18n)
- [ ] Настроить TypeScript конфиги для всех пакетов
- [ ] Настроить ESLint + Prettier
- [ ] Создать `.env.example` с переменными окружения
- [ ] Создать `.gitignore`

### 1.2 Docker и инфраструктура
- [ ] Написать `docker/docker-compose.yml` (PostgreSQL 16 + Redis 7 для локальной разработки)
- [ ] Написать `docker/docker-compose.prod.yml` (полный стек: API + Web + PG + Redis + Nginx)
- [ ] Написать `docker/Dockerfile.api` (multi-stage build для NestJS)
- [ ] Написать `docker/Dockerfile.web` (multi-stage build для Next.js)
- [ ] Написать `docker/nginx.conf` (reverse proxy, SSL-заготовка)
- [ ] Проверить: `docker compose up` поднимает всё локально

### 1.3 База данных — Prisma-схема
- [ ] Написать модель `Tenant` (name, slug, settings, plan, isActive)
- [ ] Написать модель `User` (email, password, role, tenantId, @@unique([email, tenantId]))
- [ ] Написать модель `RefreshToken`
- [ ] Написать модель `Vehicle` (make, model, year, vin, licensePlate, mileage, clientId)
- [ ] Написать модель `Service` (name, price, estimatedMinutes, normHours, complexityLevel, serviceUsage)
- [ ] Написать модель `RepairType` (name, isPaid, affectsRevenue)
- [ ] Написать модель `ServiceBay` (name, type, isActive)
- [ ] Написать модель `Appointment` (scheduledStart/End, status, source, adChannel, notes)
- [ ] Написать модель `WorkOrder` (orderNumber, status, clientComplaints, diagnosticNotes, totals)
- [ ] Написать модель `WorkOrderItem` (description, quantity, unitPrice, type: LABOR/PART)
- [ ] Написать модель `WorkLog` (mechanicId, description, hoursWorked)
- [ ] Написать модель `Recommendation` (workOrderId, type: PRIMARY/SECONDARY, description, status)
- [ ] Написать модель `Part` (sku, name, costPrice, sellPrice, currentStock, minStock)
- [ ] Написать модель `StockMovement` (partId, type, quantity, reference)
- [ ] Написать модель `PurchaseOrder` + `PurchaseOrderItem`
- [ ] Написать модель `Transaction` (type: INCOME/EXPENSE, amount, category, workOrderId)
- [ ] Написать модель `WorkOrderPhoto` (workOrderId, url, type: INTAKE/DIAGNOSTIC/PROGRESS/COMPLETION)
- [ ] Написать все индексы (tenantId на каждой таблице)
- [ ] Написать все enum'ы (UserRole, WorkOrderStatus, AppointmentStatus и т.д.)
- [ ] Запустить первую миграцию (`prisma migrate dev`)
- [ ] Написать seed-скрипт: демо-тенант «OneMotors», пользователи всех ролей, тестовые данные

### 1.4 Общий пакет (packages/shared)
- [ ] Создать enum'ы и константы (`roles.ts`, `statuses.ts`, `permissions.ts`)
- [ ] Создать матрицу прав RBAC (какая роль что может)
- [ ] Создать Zod-схемы валидации (auth, user, vehicle, appointment, work-order)
- [ ] Создать файл локализации `i18n/ru.ts` (статусы, ошибки, UI-строки)
- [ ] Создать утилиты (`money.utils.ts`, `date.utils.ts`)

### 1.5 Аутентификация (backend)
- [ ] Модуль `auth`: AuthModule, AuthController, AuthService
- [ ] `POST /auth/register` — регистрация клиента (с привязкой к тенанту)
- [ ] `POST /auth/login` — логин (email + password + tenantSlug), возврат JWT access + refresh
- [ ] `POST /auth/refresh` — обновление access-токена по refresh (httpOnly cookie)
- [ ] `POST /auth/logout` — ревокация refresh-токена
- [ ] `POST /auth/forgot-password` — запрос сброса пароля
- [ ] `POST /auth/reset-password` — сброс пароля по токену
- [ ] JWT-стратегия (access 15min, refresh 7d)
- [ ] Хеширование паролей (bcrypt)
- [ ] Написать тесты на auth-модуль

### 1.6 Tenant scoping и RBAC (backend)
- [ ] `TenantResolutionMiddleware` — извлечение tenantId из JWT / заголовка / тела
- [ ] `TenantScopeInterceptor` — автофильтрация Prisma-запросов по tenantId
- [ ] Prisma client extension для автоматической подстановки tenantId
- [ ] Декоратор `@CurrentUser()` — текущий пользователь из JWT
- [ ] Декоратор `@CurrentTenant()` — текущий тенант
- [ ] Декоратор `@Roles('permission')` — требуемое разрешение
- [ ] `RolesGuard` — проверка прав по матрице RBAC
- [ ] `JwtAuthGuard` — проверка JWT
- [ ] Написать тесты на guards

### 1.7 CRUD тенантов и пользователей (backend)
- [ ] Модуль `tenants`: TenantsController, TenantsService
- [ ] `GET /platform/tenants` — список тенантов (superadmin)
- [ ] `POST /platform/tenants` — создать тенант (superadmin)
- [ ] `GET /platform/tenants/:id` — детали тенанта
- [ ] `PATCH /platform/tenants/:id` — обновить тенант
- [ ] Модуль `users`: UsersController, UsersService
- [ ] `GET /users` — список пользователей тенанта
- [ ] `POST /users` — создать сотрудника (owner/manager)
- [ ] `GET /users/:id` — профиль пользователя
- [ ] `PATCH /users/:id` — обновить пользователя
- [ ] `GET /users/me` — текущий профиль
- [ ] Написать тесты

### 1.8 Фронтенд — базовый каркас
- [ ] Настроить Tailwind CSS + shadcn/ui
- [ ] Настроить TanStack Query (React Query)
- [ ] Настроить Zustand (минимальный client state)
- [ ] Создать API-клиент (`lib/api-client.ts`)
- [ ] Создать AuthProvider + хук `useAuth`
- [ ] Создать TenantProvider + хук `useTenant`
- [ ] Создать QueryProvider
- [ ] Страница логина `(auth)/login/page.tsx`
- [ ] Страница регистрации `(auth)/register/page.tsx`
- [ ] Страница сброса пароля `(auth)/forgot-password/page.tsx`
- [ ] Layout админки `(admin)/layout.tsx` — сайдбар, хедер, навигация
- [ ] Layout клиента `(client)/layout.tsx`
- [ ] Layout суперадмина `(superadmin)/layout.tsx`
- [ ] Пустая страница дашборда `(admin)/dashboard/page.tsx`
- [ ] Защита роутов (редирект неавторизованных)
- [ ] Адаптивный сайдбар (мобильный/десктопный)

### Результат Фазы 1
Пользователь может зарегистрироваться, залогиниться, увидеть пустой дашборд. Суперадмин может создать тенант и сотрудников. Все роли и права работают. Docker поднимает полный стек.

---

## Фаза 2 — Запись клиентов

### 2.1 Каталог услуг (backend + frontend)
- [ ] `GET /services` — список услуг тенанта (с фильтрами: категория, тип)
- [ ] `POST /services` — создать услугу
- [ ] `PATCH /services/:id` — обновить
- [ ] `DELETE /services/:id` — деактивировать (soft delete)
- [ ] Страница «Услуги» в админке — таблица, создание, редактирование
- [ ] Поля: название, цена, нормо-часы, сложность, категория, тип (планирование/производство)

### 2.2 Рабочие посты (backend + frontend)
- [ ] CRUD для ServiceBay (`/service-bays`)
- [ ] Страница «Посты» в настройках — список постов, создание, вкл/выкл

### 2.3 Автомобили клиентов (backend + frontend)
- [ ] `GET /vehicles` — список авто (для персонала — все, для клиента — свои)
- [ ] `POST /vehicles` — добавить авто
- [ ] `GET /vehicles/:id` — карточка авто
- [ ] `PATCH /vehicles/:id` — обновить
- [ ] `GET /vehicles/:id/history` — история ремонтов
- [ ] Страница «Мои авто» в личном кабинете клиента
- [ ] Страница «Автомобили» в админке — поиск по госномеру/VIN/клиенту

### 2.4 Запись на обслуживание (backend)
- [ ] `GET /appointments` — список записей (календарь для персонала, свои для клиента)
- [ ] `POST /appointments` — создать запись
- [ ] `GET /appointments/:id` — детали записи
- [ ] `PATCH /appointments/:id` — обновить (статус, перенос)
- [ ] `GET /appointments/available-slots` — свободные слоты (учёт постов, рабочих часов, существующих записей)
- [ ] Логика расчёта слотов: часы работы тенанта × кол-во постов − занятые слоты
- [ ] Валидация: нельзя записать в прошлое, нельзя перебукировать

### 2.5 Запись на обслуживание (frontend)
- [ ] Визард записи для клиента:
  - Шаг 1: выбрать авто (или добавить новое)
  - Шаг 2: выбрать услугу(и)
  - Шаг 3: выбрать дату и время из доступных слотов
  - Шаг 4: подтвердить, указать жалобу
- [ ] Календарь для персонала (FullCalendar): день/неделя, drag-and-drop, цвет по статусу
- [ ] Модальное окно деталей записи (статус, клиент, авто, услуги)
- [ ] Кнопки: подтвердить / отменить / перенести / no-show
- [ ] Страница «Мои записи» в личном кабинете клиента

### Результат Фазы 2
Клиент записывается онлайн, персонал видит календарь загрузки, управляет записями. Каталог услуг и автомобили заведены.

---

## Фаза 3 — Заказ-наряды

### 3.1 CRUD заказ-нарядов (backend)
- [ ] `POST /work-orders` — создать ЗН (вручную или из записи)
- [ ] `POST /appointments/:id/convert` — конвертировать запись в ЗН
- [ ] `GET /work-orders` — список ЗН (фильтры: статус, механик, дата)
- [ ] `GET /work-orders/:id` — полная карточка ЗН
- [ ] `PATCH /work-orders/:id` — обновить ЗН
- [ ] Автонумерация: `WO-00001` (последовательная по тенанту, в транзакции)
- [ ] State machine статусов: валидация переходов (NEW→DIAGNOSED, но не NEW→PAID)
- [ ] Правило >5%: если итоговая сумма изменилась >5% от согласованной — статус NEEDS_REAPPROVAL

### 3.2 Позиции заказ-наряда (backend)
- [ ] `POST /work-orders/:id/items` — добавить работу/запчасть
- [ ] `PATCH /work-orders/:id/items/:itemId` — обновить
- [ ] `DELETE /work-orders/:id/items/:itemId` — удалить
- [ ] Автоматический пересчёт totalLabor, totalParts, totalAmount при изменении позиций
- [ ] Нормо-часы: подтягиваются из каталога услуг при добавлении

### 3.3 Логирование работ (backend)
- [ ] `POST /work-orders/:id/work-logs` — механик логирует работу
- [ ] `GET /work-orders/:id/work-logs` — история работ по ЗН
- [ ] Поля: описание, часы, время начала/окончания

### 3.4 Рекомендации (backend)
- [ ] `POST /work-orders/:id/recommendations` — добавить рекомендацию
- [ ] `PATCH /work-orders/:id/recommendations/:recId` — обновить статус
- [ ] Типы: PRIMARY (сделать сейчас), SECONDARY (отложить)
- [ ] Поля: описание, фото/видео URL, срок/пробег, ориентировочная стоимость
- [ ] Статусы: PENDING → DONE / RESCHEDULED / DECLINED

### 3.5 Фотофиксация (backend)
- [ ] `POST /work-orders/:id/photos` — загрузить фото (multipart)
- [ ] `GET /work-orders/:id/photos` — список фото
- [ ] `DELETE /work-orders/:id/photos/:photoId` — удалить
- [ ] Типы фото: INTAKE (приёмка), DIAGNOSTIC, PROGRESS, COMPLETION
- [ ] Хранение в S3 (Selectel), в БД — только URL
- [ ] Валидация: минимум 6 фото INTAKE при приёмке (предупреждение, если меньше)

### 3.6 Чек-лист приёмщика (backend)
- [ ] Модель `ReceptionChecklist` привязанная к WorkOrder
- [ ] Поля-чекбоксы: photos, covers, clientCard, diagnostics, recommendations, statusesSent, qualityControl, payment, followUp
- [ ] `GET /work-orders/:id/checklist` — текущее состояние чек-листа
- [ ] `PATCH /work-orders/:id/checklist` — обновить чекбоксы
- [ ] Участвует в расчёте KPI «Полнота карточки»

### 3.7 Заказ-наряды (frontend)
- [ ] Страница списка ЗН — таблица с фильтрами и поиском
- [ ] **Kanban-доска** — колонки по статусам, drag-and-drop для смены статуса, цветовая кодировка
- [ ] Карточка ЗН — табы:
  - Основное (клиент, авто, механик, статус, суммы)
  - Позиции (работы + запчасти, добавление, редактирование)
  - Фото (галерея, загрузка, типы)
  - Логи работ (таймлайн)
  - Рекомендации (первичные/вторичные, статусы)
  - Чек-лист приёмщика
- [ ] Модальное окно назначения механика
- [ ] Модальное окно смены статуса (с валидацией переходов)
- [ ] Кнопка «Создать ЗН из записи»
- [ ] Вид механика: «Мои заказы» — только назначенные мне, упрощённый интерфейс
- [ ] Вид клиента: «Мои заказы» — статус, позиции, рекомендации (read-only)

### Результат Фазы 3
Полный цикл заказ-наряда работает. Приёмщик создаёт ЗН, назначает механика, добавляет работы/запчасти, загружает фото. Механик видит задания и логирует работу. Клиент следит за статусом. Kanban-доска показывает всё на одном экране.

---

## Фаза 4 — Склад

### 4.1 Каталог запчастей (backend + frontend)
- [ ] CRUD для Part (`/parts`)
- [ ] Поля: SKU, название, бренд, OEM-номер, категория, ед. измерения, цена закупки, цена продажи, текущий остаток, мин. остаток, место на складе
- [ ] Поиск: по названию, SKU, OEM-номеру, бренду
- [ ] Страница «Запчасти» в админке — таблица с фильтрами, импорт/экспорт

### 4.2 Движение запчастей (backend)
- [ ] Автоматическое создание StockMovement (type: USED) при добавлении запчасти в ЗН
- [ ] Автоматическое создание StockMovement (type: RETURNED) при удалении запчасти из ЗН
- [ ] `POST /parts/:id/adjust` — ручная корректировка остатков (с комментарием)
- [ ] `GET /parts/:id/movements` — история движений по запчасти
- [ ] Обновление `currentStock` при каждом движении (в транзакции)
- [ ] `GET /parts/low-stock` — запчасти ниже минимального остатка

### 4.3 Заказы поставщикам (backend + frontend)
- [ ] CRUD для PurchaseOrder (`/purchase-orders`)
- [ ] Статусы: DRAFT → ORDERED → PARTIALLY_RECEIVED → RECEIVED → CANCELLED
- [ ] `POST /purchase-orders/:id/receive` — приёмка (обновление остатков, создание StockMovement type: PURCHASE)
- [ ] Позиции заказа: запчасть, количество, цена, полученное количество
- [ ] Страница «Заказы поставщикам» — список, создание, приёмка

### 4.4 Склад (frontend)
- [ ] Страница «Склад» — текущие остатки, поиск, фильтры по категориям
- [ ] Оповещение «Заканчивается» — бейдж на боковой панели, список запчастей ниже минимума
- [ ] История движений по запчасти (модальное окно)
- [ ] Выбор запчасти при добавлении в ЗН — автокомплит с отображением остатка

### Результат Фазы 4
Склад связан с заказ-нарядами. Запчасти автоматически списываются/резервируются. Менеджер видит что заканчивается и заказывает у поставщиков.

---

## Фаза 5 — Финансы и аналитика

### 5.1 Транзакции (backend + frontend)
- [ ] Автоматическое создание Transaction (INCOME) при оплате ЗН
- [ ] `POST /transactions` — ручной ввод дохода/расхода
- [ ] `GET /transactions` — список с фильтрами (тип, период, категория)
- [ ] Категории: service_revenue, parts_revenue, salary, rent, utilities, parts_purchase, other
- [ ] Способы оплаты: наличные, карта, перевод, СБП
- [ ] Страница «Транзакции» — таблица, создание, фильтры

### 5.2 Отчёты (backend)
- [ ] `GET /reports/summary` — KPI дашборда:
  - Выручка (день/неделя/месяц)
  - Количество ЗН по статусам
  - Средний чек
  - Загрузка постов (%)
  - Загрузка механиков (%)
- [ ] `GET /reports/revenue` — выручка за период (по дням/неделям/месяцам, по услугам, по механикам)
- [ ] `GET /reports/mechanic-payroll` — выработка механиков (часы, ЗН, сумма работ)
- [ ] `GET /reports/inventory-value` — стоимость склада
- [ ] `GET /reports/client-history/:clientId` — история клиента (визиты, потрачено, рекомендации)
- [ ] `GET /reports/sources` — аналитика источников клиентов

### 5.3 KPI приёмщиков (backend)
- [ ] `GET /reports/receptionist-kpi` — расчёт 5 KPI для каждого приёмщика:
  - Полнота карточки (% ЗН с заполненным чек-листом)
  - SLA по статусам (% ЗН с 4 статусами вовремя)
  - Качество рекомендаций (% ЗН с рекомендациями по стандарту)
  - Корректность согласований (% ЗН со сметами по стандарту)
  - Follow-up (% выданных авто с результатом follow-up)
- [ ] Порог: 90% по каждому

### 5.4 Расчёт зарплаты (backend)
- [ ] `GET /reports/salary/:userId` — расчёт зарплаты приёмщика за период:
  - Оклад
  - Маржа по его ЗН (работы − ЗП механикам + наценка на запчасти)
  - Ступень процента (0% / 3% / 4% / 5% / 6%)
  - Итоговая сумма
  - KPI-штраф (если есть)
- [ ] Настройка ступеней в TenantSettings (чтобы каждое СТО могло настроить свои ступени)

### 5.5 Дашборд и отчёты (frontend)
- [ ] Страница «Дашборд» — виджеты:
  - Выручка (график: день/неделя/месяц)
  - Заказ-наряды по статусам (воронка / pie chart)
  - Средний чек (число + тренд)
  - Топ-5 услуг по выручке
  - Загрузка постов (progress bars)
  - Загрузка механиков (progress bars)
  - Запчасти, которые заканчиваются (badge)
- [ ] Страница «Отчёты» — табы:
  - Выручка (таблица + график, фильтры по периоду)
  - Механики (выработка, часы, заказы)
  - KPI приёмщиков (таблица с цветовой индикацией: зелёный >90%, красный <90%)
  - Зарплата (расчёт по сотрудникам за месяц)
  - Источники клиентов (pie chart)
- [ ] Экспорт в CSV/Excel для всех отчётов

### Результат Фазы 5
Руководитель видит полную картину бизнеса: выручку, загрузку, эффективность сотрудников. KPI считаются автоматически. Зарплата рассчитывается по формуле.

---

## Фаза 6 — Полировка и продакшен

### 6.1 UX / UI
- [ ] Loading-состояния для всех страниц (скелетоны)
- [ ] Пустые состояния (empty states) с подсказками
- [ ] Состояния ошибок с retry
- [ ] Toast-уведомления (успех, ошибка)
- [ ] Адаптивная вёрстка — проверка на мобильных
- [ ] Тёмная тема (опционально)
- [ ] Горячие клавиши для частых действий

### 6.2 Безопасность
- [ ] CORS — только разрешённые домены
- [ ] Rate limiting — защита от брутфорса (login: 5 попыток/мин)
- [ ] Helmet — HTTP-заголовки безопасности
- [ ] Input sanitization — защита от XSS
- [ ] Проверка tenant isolation — данные одного тенанта недоступны другому (интеграционные тесты)
- [ ] Аудит: проверка что нет SQL injection (Prisma защищает, но проверить raw queries)

### 6.3 Производительность
- [ ] Пагинация на всех списковых эндпоинтах
- [ ] Индексы в БД — проверить планы запросов (EXPLAIN)
- [ ] Кэширование частых запросов в Redis (каталог услуг, настройки тенанта)
- [ ] Оптимизация N+1 запросов (Prisma include/select)
- [ ] Сжатие ответов (gzip)
- [ ] Оптимизация изображений (resize при загрузке)

### 6.4 Деплой
- [ ] CI/CD: GitHub Actions → билд → деплой на Selectel (docker compose pull && up)
- [ ] SSL-сертификат (Certbot / Let's Encrypt)
- [ ] Бэкапы PostgreSQL → S3 (ежедневные, хранение 30 дней)
- [ ] Мониторинг: health-check эндпоинт, алерты при падении
- [ ] Логирование: структурированные логи (JSON), ротация

### 6.5 Документация
- [ ] Swagger UI на `/api/docs` — описания на русском
- [ ] Seed-данные для демо (тенант OneMotors, тестовые ЗН, клиенты, авто)

### Результат Фазы 6
Система готова к продакшену. Безопасна, быстра, задеплоена на Selectel с SSL и бэкапами.

---

## Фаза 7a — Онлайн-касса (54-ФЗ)

- [ ] Абстрактный интерфейс `FiscalProvider`
- [ ] Реализация для АТОЛ Онлайн (REST API)
- [ ] Формирование чека при оплате ЗН (позиции, НДС 22%, способ оплаты)
- [ ] Обработка callback от АТОЛ (статус фискализации)
- [ ] Чек возврата при возврате денег
- [ ] Модель `FiscalReceipt` в БД
- [ ] Настройки кассы в админке тенанта (ИНН, адрес, group code)
- [ ] Страница «Чеки» — история фискальных операций
- [ ] Кнопка «Пробить чек» в карточке ЗН при оплате

### Результат
Автосервис работает в соответствии с 54-ФЗ. Электронные чеки отправляются клиентам.

---

## Фаза 7b — IP-телефония

- [ ] Абстрактный интерфейс `TelephonyProvider`
- [ ] Реализация для Mango Office (API webhooks)
- [ ] Webhook входящего звонка → поиск клиента по номеру
- [ ] Всплывающая карточка клиента при входящем звонке (WebSocket)
- [ ] Click-to-call из карточки клиента / ЗН
- [ ] Модель `CallRecord` в БД (направление, длительность, запись, привязка к клиенту/ЗН)
- [ ] Страница «Звонки» — история с фильтрами, плеер записей
- [ ] Автосоздание записи (Appointment) при звонке нового номера
- [ ] Статистика: пропущенные, среднее время ответа

### Результат
Телефония интегрирована в CRM. При звонке сразу видно кто звонит и вся история.

---

## Фаза 7c — AI-консьерж

- [ ] Модуль `ai-concierge` с LLM-интеграцией (OpenAI / YandexGPT)
- [ ] System prompt с контекстом тенанта (услуги, цены, расписание)
- [ ] Сценарий: онлайн-запись через чат
- [ ] Сценарий: статус ремонта («что с моей машиной?»)
- [ ] Сценарий: FAQ (цены, график, адрес)
- [ ] Эскалация на оператора (кнопка + автоматическая при непонимании)
- [ ] Модели `ChatConversation`, `ChatMessage` в БД
- [ ] Виджет чата для встраивания на сайт (iframe/JS SDK)
- [ ] Telegram-бот (Bot API)
- [ ] Панель оператора: список диалогов, подхват эскалированных, ответ от имени бота
- [ ] Настройки бота в админке (промпт, каналы, время работы)

### Результат
AI-бот отвечает клиентам 24/7, записывает на сервис, сообщает статус. Оператор подключается когда нужно.

---

## Фаза 8 — Уведомления клиентам

- [ ] Абстрактный интерфейс `MessagingProvider`
- [ ] Реализация: Telegram Bot API
- [ ] Реализация: SMS (SMS.ru)
- [ ] Реализация: Email (UniSender или SMTP)
- [ ] Реализация: WhatsApp (Wazzup — если доступен)
- [ ] Поле «предпочтительный канал» в карточке клиента
- [ ] Шаблоны сообщений с плейсхолдерами (`packages/shared/src/templates/`)
- [ ] Автоматическая отправка 4 статусов при смене статуса ЗН
- [ ] Напоминание за день до записи
- [ ] Follow-up через 2 дня после выдачи (автозадача + автосообщение)
- [ ] Напоминание о вторичных рекомендациях (по настроенному сроку)
- [ ] Логирование всех отправок (кому, когда, канал, статус доставки)
- [ ] BullMQ-очередь для асинхронной отправки
- [ ] Страница «Рассылки / Логи» в админке

### Результат
Клиент автоматически получает статусы ремонта и напоминания в удобном канале.

---

## Сводка по фазам

| Фаза | Название | Зависит от |
|------|---------|-----------|
| 1 | Фундамент (scaffold, auth, RBAC, layout) | — |
| 2 | Запись клиентов (услуги, авто, календарь) | Фаза 1 |
| 3 | Заказ-наряды (ЗН, позиции, фото, kanban) | Фаза 2 |
| 4 | Склад (запчасти, движения, заказы поставщикам) | Фаза 3 |
| 5 | Финансы и аналитика (отчёты, KPI, зарплата) | Фаза 4 |
| 6 | Полировка и продакшен (безопасность, деплой) | Фаза 5 |
| 7a | Онлайн-касса 54-ФЗ | Фаза 5 |
| 7b | IP-телефония | Фаза 3 |
| 7c | AI-консьерж | Фаза 3 |
| 8 | Уведомления клиентам | Фаза 3 |

**MVP = Фазы 1 + 2 + 3**

Фазы 7a, 7b, 7c, 8 могут выполняться параллельно после Фазы 3.
